(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{238:function(t,s){t.exports="data:image/jpeg;base64,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"},304:function(t,s,a){"use strict";a.r(s);var n=a(0),r=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"为node-api写单元测试-jest-mock"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#为node-api写单元测试-jest-mock"}},[t._v("#")]),t._v(" 为Node API写单元测试(Jest Mock)")]),t._v(" "),n("h2",{attrs:{id:"mock"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#mock"}},[t._v("#")]),t._v(" Mock")]),t._v(" "),n("p",[t._v("在单元测试里, 涉及到文件读写和网络请求的部分并不会调用真实的API去完成, 而是通过模拟(mock)出一段数据当作真实的结果. 按照惯例, 模拟的API需要放在"),n("code",[t._v("__mocks__")]),t._v("文件夹里, 并且要在离调用API最近的地方:")]),t._v(" "),n("p",[n("img",{attrs:{src:a(238),alt:"mock"}})]),t._v(" "),n("p",[t._v("这里以仿写"),n("code",[t._v("fs.readFile")]),t._v("为例, 主要分为两大步: 首先模拟数据, 然后模拟API.")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// fs.js")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fs "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" jest"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("genMockFromModule")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fs'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// mock模块")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" _fs "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" jest"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("requireActual")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fs'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 引用真正的模块")]),t._v("\nObject"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("assign")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" _fs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" mocks "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 模拟数据")]),t._v("\nfs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("mockData")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  mocks"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 模拟readFile函数")]),t._v("\nfs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("readFile")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callback")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("callback "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" callback "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" options\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mocks"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("mocks"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    _fs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFile")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callback"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nmodule"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" fs\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br")])]),n("h2",{attrs:{id:"test"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#test"}},[t._v("#")]),t._v(" Test")]),t._v(" "),n("p",[t._v("在这里, 我们可以使用mock api开始测试功能了:")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("jest"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("mock")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fs'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fs "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fs'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("describe")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'db'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("it")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'should read'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    fs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("mockData")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/xxx'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" result "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" fs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFile")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/xxx'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("expect")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toStrictEqual")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br")])])])}),[],!1,null,null,null);s.default=r.exports}}]);